<!DOCTYPE html>
<html>
<head>
    <title>Debug Sources - Aura Inventory</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { margin: 10px; padding: 10px 20px; cursor: pointer; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Debug Sources - Aura Inventory</h1>
    
    <h2>Current Sources in localStorage:</h2>
    <pre id="currentSources"></pre>
    
    <h2>Actions:</h2>
    <button onclick="showSources()">Show Current Sources</button>
    <button onclick="clearSources()">Clear Sources (Reset to Default)</button>
    
    <div id="result"></div>

    <script>
        function showSources() {
            const sources = localStorage.getItem('aura_inventory_sources');
            const resultDiv = document.getElementById('result');
            const sourcesDiv = document.getElementById('currentSources');
            
            if (sources) {
                try {
                    const parsed = JSON.parse(sources);
                    sourcesDiv.textContent = JSON.stringify(parsed, null, 2);
                    resultDiv.innerHTML = `<p class="success">Found ${parsed.length} sources in localStorage</p>`;
                    
                    // Show inward and outward sources separately
                    const inwardSources = parsed.filter(s => s.type === 'inward' || s.type === 'both');
                    const outwardSources = parsed.filter(s => s.type === 'outward' || s.type === 'both');
                    
                    resultDiv.innerHTML += `
                        <h3>Inward Sources (${inwardSources.length}):</h3>
                        <ul>${inwardSources.map(s => `<li>${s.name} (${s.id}) - Active: ${s.isActive}</li>`).join('')}</ul>
                        
                        <h3>Outward Sources (${outwardSources.length}):</h3>
                        <ul>${outwardSources.map(s => `<li>${s.name} (${s.id}) - Active: ${s.isActive}</li>`).join('')}</ul>
                    `;
                } catch (e) {
                    sourcesDiv.textContent = 'Invalid JSON';
                    resultDiv.innerHTML = `<p class="error">Error parsing sources: ${e.message}</p>`;
                }
            } else {
                sourcesDiv.textContent = 'No sources found in localStorage';
                resultDiv.innerHTML = '<p>No sources found in localStorage. Will use defaults on next load.</p>';
            }
        }
        
        function clearSources() {
            localStorage.removeItem('aura_inventory_sources');
            document.getElementById('result').innerHTML = '<p class="success">Sources cleared! Refresh your application to use the updated defaults with Meesho included.</p>';
            document.getElementById('currentSources').textContent = 'localStorage cleared';
        }
        
        // Show sources on load
        showSources();
    </script>
</body>
</html>